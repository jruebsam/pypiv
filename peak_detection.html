<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Peak detection algorithms &#8212; pypiv a1 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     'a1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Class for scaling the velocity field" href="velocity_scaler.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="velocity_scaler.html" title="Class for scaling the velocity field"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pypiv a1 documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="velocity_scaler.html"
                        title="previous chapter">Class for scaling the velocity field</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/peak_detection.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="peak-detection-algorithms">
<h1>Peak detection algorithms<a class="headerlink" href="#peak-detection-algorithms" title="Permalink to this headline">¶</a></h1>
<p>The function to call for the peak detection is a switch for the different methods.</p>
<dl class="function">
<dt id="piv.peak_detection.find_peak">
<code class="descclassname">piv.peak_detection.</code><code class="descname">find_peak</code><span class="sig-paren">(</span><em>corr</em>, <em>method='gaussian'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/piv/peak_detection.html#find_peak"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#piv.peak_detection.find_peak" title="Permalink to this definition">¶</a></dt>
<dd><p>Peak detection algorithm switch</p>
<p>After loading the correlation window an maximum finder is invoked.
The correlation window is cut down to the necessary 9 points around the maximum.
Afterwards the maximum is checked not to be close to the boarder of the correlation frame.
This cropped window is used in along with the chosen method to interpolate the sub pixel shift.
Each interpolation method returns a tuple with the sub pixel shift in x and y direction.
The maximums position and the sub pixel shift are added and returned.
If an error occurred during the sub pixel interpolation the shift is set to nan.
Also if the interpolation method is unknown an exception in thrown.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>corr</strong> &#8211; correlation window</li>
<li><strong>method</strong> &#8211; peak finder algorithm (gaussian, centroid, parabolic, 9point)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first">Sub pixel interpolation method not found</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">shift in interrogation window</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>It uses a function to check weather the maximum is inside or at the boarder of the correlation window.</p>
<dl class="function">
<dt id="piv.peak_detection.check_peak_position">
<code class="descclassname">piv.peak_detection.</code><code class="descname">check_peak_position</code><span class="sig-paren">(</span><em>corr</em>, <em>i</em>, <em>j</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/piv/peak_detection.html#check_peak_position"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#piv.peak_detection.check_peak_position" title="Permalink to this definition">¶</a></dt>
<dd><p>Checking weather the maximum is at the boarder of the correlation window</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>corr</strong> &#8211; correlation window</li>
<li><strong>i</strong> &#8211; first index position of the maximum</li>
<li><strong>j</strong> &#8211; second index position of the maximum</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">true if maximum is inside the correlation window</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>The interpolation for the sub pixel shift has four different algorithms.</p>
<dl class="function">
<dt id="piv.peak_detection.gaussian">
<code class="descclassname">piv.peak_detection.</code><code class="descname">gaussian</code><span class="sig-paren">(</span><em>window</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/piv/peak_detection.html#gaussian"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#piv.peak_detection.gaussian" title="Permalink to this definition">¶</a></dt>
<dd><p>Gaussian interpolation for sub pixel shift</p>
</dd></dl>

<dl class="function">
<dt id="piv.peak_detection.centroid">
<code class="descclassname">piv.peak_detection.</code><code class="descname">centroid</code><span class="sig-paren">(</span><em>window</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/piv/peak_detection.html#centroid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#piv.peak_detection.centroid" title="Permalink to this definition">¶</a></dt>
<dd><p>Centroid interpolation for sub pixel shift</p>
</dd></dl>

<dl class="function">
<dt id="piv.peak_detection.parabolic">
<code class="descclassname">piv.peak_detection.</code><code class="descname">parabolic</code><span class="sig-paren">(</span><em>window</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/piv/peak_detection.html#parabolic"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#piv.peak_detection.parabolic" title="Permalink to this definition">¶</a></dt>
<dd><p>Parabolic interpolation for sub pixel shift</p>
</dd></dl>

<dl class="function">
<dt id="piv.peak_detection.gaussian2D">
<code class="descclassname">piv.peak_detection.</code><code class="descname">gaussian2D</code><span class="sig-paren">(</span><em>window</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/piv/peak_detection.html#gaussian2D"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#piv.peak_detection.gaussian2D" title="Permalink to this definition">¶</a></dt>
<dd><p>Real 2D Gaussian interpolation for sub pixel shift</p>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="velocity_scaler.html" title="Class for scaling the velocity field"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pypiv a1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016-2017, Jonas Ruebsam, Axel Rosenthal, Kevin Luedemann.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.2.
    </div>
  </body>
</html>